@if (isLoading === true) {
<main>
  <section class=" bg-white overflow-hidden dark:bg-gray-950">
    <div class="loading bg-gradient-to-r from-indigo-700 to-pink-500 dark:from-gray-400 dark:to-gray-500"></div>
    <div class="w-[95%] mx-auto py-5">
      <div class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5">
        @for (fake of fakeArray; track $index) {
        <div
          class="h-full flex flex-row md:flex-col items-center overflow-hidden border rounded-lg bg-white dark:bg-gray-900 animate-pulse">
          <div class="relative w-1/3 md:w-full aspect-square md:pt-[100%] overflow-hidden bg-gray-300 dark:bg-gray-700">
          </div>
          <div class="w-2/3 md:w-full flex flex-col justify-between h-full">
            <div class="flex-grow p-4 space-y-2">
              <div class="flex justify-between items-start gap-2 mb-2">
                <span class="h-5 w-16 rounded bg-gray-300 dark:bg-gray-700"></span>
                <span class="h-5 w-10 rounded bg-gray-300 dark:bg-gray-700"></span>
              </div>
              <div class="h-5 w-3/4 rounded bg-gray-300 dark:bg-gray-700"></div>
              <div class="h-4 w-full rounded bg-gray-200 dark:bg-gray-600"></div>
              <div class="h-4 w-5/6 rounded bg-gray-200 dark:bg-gray-600"></div>
              <div class="h-4 w-4/6 rounded bg-gray-200 dark:bg-gray-600"></div>
            </div>
            <div class="px-4 pb-4">
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-1">
                  <div class="h-4 w-20 bg-gray-300 dark:bg-gray-700 rounded"></div>
                  <div class="h-4 w-6 bg-gray-300 dark:bg-gray-700 rounded"></div>
                </div>
                <div class="h-4 w-16 bg-gray-300 dark:bg-gray-700 rounded"></div>
              </div>
            </div>
          </div>
        </div>
        }
      </div>
    </div>
  </section>
</main>
}@else if (isLoading === false) {
<main>
  <section class=" bg-gray-100 overflow-hidden dark:bg-gray-950">
    <div class="w-[95%] mx-auto py-5 space-y-5">
      <form class="w-full mx-auto">
        <div class="relative flex">
          <label for="search-dropdown" class="mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white">Your
            Email</label>
          <button id="dropdown-button" (click)="toggleDropdown() ; fetchCategories()"
            class="shrink-0 z-10 inline-flex items-center py-2.5 px-4 text-sm font-medium text-center text-gray-900 bg-gray-100 border border-gray-300 rounded-s-lg hover:bg-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-100 dark:bg-gray-700 dark:hover:bg-gray-600 dark:focus:ring-gray-700 dark:text-white dark:border-gray-600"
            type="button">
            All categories
            <svg class="w-2.5 h-2.5 ms-2.5" aria-hidden="true" fill="none" viewBox="0 0 10 6">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="m1 1 4 4 4-4" />
            </svg>
          </button>
          <div id="dropdown" #dropdownMenu
            class="absolute top-full left-0 mt-1 hidden bg-white divide-y divide-gray-100 rounded-md shadow-md w-44 z-20 dark:bg-gray-700">
            <ul class="py-2 text-sm text-gray-700 dark:text-gray-200 max-h-[50vh] overflow-y-auto">
              @for (categorie of categories; track $index) {
              <li>
                <button type="button"
                  class="inline-flex w-full px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">{{categorie}}</button>
              </li>
              }
            </ul>
          </div>
          <div class="relative w-full">
            <input type="search" id="search-dropdown"
              class="block p-2.5 w-full z-20 text-sm text-gray-900 bg-gray-50 rounded-e-lg border-s-gray-50 border-s-2 border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-s-gray-700  dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:border-blue-500"
              placeholder="Search" />
            <button type="submit"
              class="absolute top-0 end-0 p-2.5 text-sm font-medium h-full text-white bg-blue-700 rounded-e-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
              <svg class="w-4 h-4" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                viewBox="0 0 20 20">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z" />
              </svg>
              <span class="sr-only">Search</span>
            </button>
          </div>
        </div>
      </form>
      <div class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5">
        @for (product of products; track product.id) {
        <a [routerLink]="['/productdetails', product.id]" [title]="'view ' + product.title + ' product'">
          <div class="h-full cursor-pointer flex flex-row md:flex-col items-center overflow-hidden group
      hover:shadow-lg transition-all duration-100 border border-pink-500 dark:border-gray-600
      rounded-lg bg-white dark:bg-gray-900">
            <div class="relative w-1/3 md:w-full aspect-square md:pt-[100%] overflow-hidden">
              <img [src]='product.image'
                class="absolute top-0 left-0 w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
                [alt]="product.title" />
            </div>
            <div class="w-2/3 md:w-full flex flex-col justify-between h-full">
              <div class="flex-grow p-4">
                <div class="flex justify-between items-start gap-2 mb-2">
                  <span class="bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white
            text-xs px-2 py-1 rounded transition-colors duration-300">
                    {{ product.category }}
                  </span>
                  <span class="text-lg font-bold text-indigo-600 dark:text-indigo-400 transition-colors duration-300">
                    ${{ product.price }}
                  </span>
                </div>
                <h3
                  class="text-lg font-semibold line-clamp-2 text-gray-900 dark:text-white transition-colors duration-300">
                  {{ product.title }}
                </h3>
                <p class="text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-3 transition-colors duration-300">
                  {{ product.description }}
                </p>
              </div>
              <div class="px-4 pb-4">
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-1">
                    <div class="stars" [style.--rating]="product.rating.rate"></div>
                    <p class="text-gray-500 dark:text-gray-400 text-xs transition-colors duration-300">
                      ({{ product.rating.rate }})
                    </p>
                  </div>
                  <span class="text-xs text-gray-500 dark:text-gray-400 transition-colors duration-300">
                    ({{ product.rating.count }} reviews)
                  </span>
                </div>
              </div>
            </div>
          </div>
        </a>
        }
      </div>
    </div>
  </section>
</main>
}
@if (retryConnection === true) {
<main>
  <section class=" bg-gray-100 overflow-hidden dark:bg-gray-950">
    <div class="w-[95%] mx-auto py-5 h-screen flex flex-col justify-center items-center space-y-3">
      <p class="dark:text-white text-black font-bold text-xl">
        Connect To the internet
      </p>
      <p class="dark:text-white text-black font-medium text-xs">
        You're offline. Check your connection.
      </p>
      <button (click)="retryFetchProducts()" class="rounded-full border hover:bg-gray-200 px-3 py-1 text-blue-500 font-semibold">Retry</button>
    </div>
  </section>
</main>
}
<!-- <div class="w-1/12 h-1/12  cursor-pointer">
        <lucide-icon [img]="RotateCw" class="w-full h-full text-black dark:text-white " /> -->
<!-- <lucide-icon [img]="LoaderCircle" class="w-full animate-spin h-full text-black dark:text-white " /> -->
<!-- </div> -->
